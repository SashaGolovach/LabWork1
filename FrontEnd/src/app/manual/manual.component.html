<div class="container">

  <div class="input-group mb-3">
    <div class="input-group-prepend">
      <label class="input-group-text" for="inputGroupSelect01">Options</label>
    </div>
    <select class="custom-select" type="number" [(ngModel)]="searchType" (change)="selectOnChange()">
      <option *ngFor="let option of searchOptions" [ngValue]="option.num">{{option.name}}</option>
    </select>
  </div>

  <div class="input-group mb-3" *ngIf="searchType == 0">
    <input type="text" class="form-control" placeholder="pattern" id="patternInput">
    <div class="input-group-append">
      <button class="btn btn-outline-secondary" type="button" (click)="getMessagesEndWithClick()">Search</button>
    </div>
  </div>

  <div class="input-group mb-3" *ngIf="searchType == 1">
    <div class="input-group">
      <input type="text" class="form-control" placeholder="first user ID" id="firstUserInput">
      <input type="text" class="form-control" placeholder="second user ID" id="secondUserInput">
      <select class="custom-select" type="number" [(ngModel)]="messageType">
        <option *ngFor="let option of messageTypes" [ngValue]="option.num">{{option.name}}</option>
      </select>
      <button class="btn btn-outline-secondary" type="button" (click)="getMessagesWithCertaingTypeClick()">Search</button>
    </div>
  </div>

  <div class="input-group mb-3" *ngIf="searchType == 2">
    <div class="col-10 input-group">
      <input class="form-control" type="datetime-local" value="2019-01-01T13:45:00" id="timeStampInput">
      <button class="btn btn-outline-secondary" type="button" (click)="getMessagesAfterTimeStampClick()">Search</button>
    </div>
  </div>

  <div id="table" class="table-editable">
    <span class="table-add float-right mb-3 mr-2">
      <button type="button" class="btn btn-success" (click)="add()">Add</button>
    </span>
    <table class="table table-bordered table-responsive-md table-striped text-center">
      <tr>
        <th class="text-center">ID</th>
        <th class="text-center">From</th>
        <th class="text-center">To</th>
        <th class="text-center">Content</th>
        <th class="text-center">Spam score</th>
        <th class="text-center">Message type</th>
        <th class="text-center">Time</th>
        <th class="text-center">Remove</th>
      </tr>
      <tr *ngFor="let message of messages; let id = index">
        <td>
          <span contenteditable="false">{{message.id}}</span>
        </td>
        <td>
          <span contenteditable="true" (keyup)="changeValue(id, 'senderID', $event)"
            (blur)="updateList(id, 'senderID', $event)">{{message.senderID}}</span>
        </td>
        <td>
          <span contenteditable="true" (keyup)="changeValue(id, 'receiverID', $event)"
            (blur)="updateList(id, 'receiverID', $event)">{{message.receiverID}}</span>
        </td>
        <td>
          <span contenteditable="true" (keyup)="changeValue(id, 'content', $event)"
            (blur)="updateList(id, 'content', $event)">{{message.content}}</span>
        </td>
        <td>
          <span contenteditable="true" (keyup)="changeValue(id, 'spamScore', $event)"
            (blur)="updateList(id, 'spamScore', $event)">{{message.spamScore}}</span>
        </td>
        <td>
          <span contenteditable="true" (keyup)="changeValue(id, 'messageType', $event)"
            (blur)="updateList(id, 'messageType', $event)">{{message.messageType}}</span>
        </td>
        <td>
          <span contenteditable="true" (keyup)="changeValue(id, 'timeStamp', $event)"
            (blur)="updateList(id, 'timeStamp', $event)">{{message.timeStamp | date: 'dd.MM.yyyy HH:mm'}}</span>
        </td>
        <td>
          <span class="table-remove">
            <button type="button" mdbBtn color="danger" rounded="true" size="sm" class="my-0"
              (click)="remove(id)">Remove</button>
          </span>
        </td>
      </tr>
    </table>
  </div>
</div>